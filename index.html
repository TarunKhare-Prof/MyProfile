<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tarun Khare - Portfolio</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- ===== HEADER WITH IMAGE & NAME ===== -->
  <header>
    <div class="header-content">
      <img src="images/profile.jpg" alt="Tarun Khare" class="profile-pic" id="profileImage" />
      <div class="text-content">
        <h1>Tarun Khare</h1>
        <h2>Sr. Software Engineer</h2>
      </div>
    </div>
  </header>

  <!-- ===== NAVIGATION ===== -->
  <nav id="tabs"></nav>

  <!-- ===== MAIN TAB CONTAINER ===== -->
  <div id="tabWrapper"></div>

  <!-- ===== JAVASCRIPT ===== -->
  <script>
    async function fetchJSON(path) {
      const res = await fetch(path);
      if (!res.ok) {
        alert(`Failed to load ${path}`);
        throw new Error(`Failed to load ${path}`);
      }
      return res.json();
    }

    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      const target = document.getElementById(tabId);
      if (target) target.classList.add('active');
    }

    async function initPortfolio() {
      const data = await fetchJSON('data/portfolio.json');

      const nav = document.getElementById('tabs');
      const wrapper = document.getElementById('tabWrapper');

      data.tabs.forEach((tab, idx) => {
        const btn = document.createElement('button');
        btn.textContent = tab.label;
        btn.onclick = () => showTab(tab.id);
        nav.appendChild(btn);

        const section = document.createElement('div');
        section.className = 'tab-content';
        section.id = tab.id;
        section.innerHTML = `<h2>${tab.title}</h2>`;

        if (tab.id === 'personal' && tab.projects) {
          const grid = document.createElement('div');
          grid.className = 'projects-grid';
          grid.innerHTML = tab.projects.map(p => `
            <div class="project-card">
              <h4>${p.title}</h4>
              ${p.type === 'video'
                ? `<video controls><source src="${p.src}" type="video/mp4"></video>`
                : `<img src="${p.src}" alt="${p.title}">`}
              ${p.description ? `<p>${p.description}</p>` : ''}
            </div>
          `).join('');
          section.appendChild(grid);
        } else if (tab.content) {
          section.innerHTML += tab.content.map(text => `<p>${text}</p>`).join('');
        }

        wrapper.appendChild(section);
        if (idx === 0) section.classList.add('active');
      });
    }

    initPortfolio();
  </script>
</body>

</html>
